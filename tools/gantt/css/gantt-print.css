/* ========== GANTT PRINT STYLES - Gantt-specific print overrides ========== */

@media print {
  /* Hide gantt-specific interactive elements */
  .task-actions,
  .add-task-row,
  .category-actions,
  .add-category-row,
  .progress-stats,
  .collapse-toggle,
  .status-indicator,
  .category-drag-handle,
  .move-dropdown,
  .edit-mode-banner {
    display: none !important;
  }

  /* ========== REAL ROW VISUAL DIFFERENTIATION ========== */
  /* Remove left border and add indent instead */
  .task-row--reality > div:first-child {
    border-left: none !important;
    padding-left: 30px !important;
  }

  /* Subtle background for REAL rows */
  .task-row--reality > div {
    background: #fafafa !important;
  }

  /* ========== CURRENT WEEK - MUTED FOR PRINT ========== */
  .week-header .week-cell--today {
    background: #f0f0f0 !important;
    color: #666 !important;
  }

  /* Hide the overlay marker in print (positioning doesn't work) */
  .today-marker-overlay {
    display: none !important;
  }

  /* Show individual cell markers in print (fallback since overlay is hidden) */
  .week-cell--today::before {
    display: block !important;
    background: #999 !important; /* Muted gray for print */
  }

  /* Gantt container */
  .gantt {
    background: #fff !important;
    border: 1px solid #333;
    box-shadow: none;
    overflow: visible;
    position: static !important; /* Reset positioning for print layout */
  }

  /* Disable sticky columns for print */
  .gantt > * > div:first-child,
  .gantt > * > div:nth-child(2) {
    position: static !important;
    box-shadow: none !important;
  }

  /* Month headers - subtle contrast */
  .month-header > div {
    background: #2a2a2a !important;
    color: #fff !important;
    font-weight: 600;
    font-size: 8pt;
    border-right: 1px solid #444;
  }

  /* Week headers - light gray */
  .week-header > div {
    background: #f0f0f0 !important;
    color: #333 !important;
    font-size: 7pt;
    font-weight: 500;
    border-right: 1px solid #ddd;
    border-bottom: 1px solid #ccc;
  }

  /* Category rows - maintain category colors but ensure contrast */
  .category-row > div {
    font-weight: 700 !important;
    font-size: 8pt;
    letter-spacing: 0.05em;
    border-bottom: 2px solid #333 !important;
  }

  /* Task rows */
  .task-row > div {
    background: #fff !important;
    border-bottom: 1px solid #e5e5e5;
    font-size: 8pt;
  }

  .task-row > div:first-child {
    font-weight: 500;
    color: #1a1a1a !important;
  }

  /* Task type labels */
  .task-row > div:nth-child(2) {
    color: #666 !important;
    font-size: 7pt;
    text-transform: uppercase;
    letter-spacing: 0.03em;
  }

  /* Week cells - active cells keep their colors */
  .week-cell--active {
    border: none !important;
  }

  /* Force background colors to print */
  .week-cell--planned.week-cell--active {
    background: var(--task-color) !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }

  .week-cell--reality.week-cell--active {
    background: color-mix(in srgb, var(--task-color) 50%, transparent) !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }

  /* Category row backgrounds */
  .category-row > div {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }

  /* ========== PRINT FOOTER ========== */
  /* Remove old ::after footer (using DOM element instead) */
  .gantt::after {
    display: none !important;
  }

  /* DOM-based print footer row */
  .gantt-print-footer {
    display: block !important;
    grid-column: 1 / -1;
    text-align: right;
    font-size: 7pt;
    color: #666;
    padding: 12px;
    border-top: 1px solid #e5e5e5;
    background: #fff !important;
    page-break-before: avoid !important;
    break-before: avoid !important;
  }

  /* Keep PLAN and REAL rows together (don't split a task across pages) */
  .task-row--planned {
    page-break-after: avoid !important;
    break-after: avoid !important;
  }

  /* Keep category header with its first task */
  .category-row {
    page-break-after: avoid !important;
    break-after: avoid !important;
  }

  /* ========== PRINT METADATA IN REALITY ROW ========== */
  /* Show metadata (assignee, priority, notes) in reality row for print */
  .task-print-meta {
    display: block !important;
    font-size: 7pt;
    color: #666 !important;
    font-style: italic;
    padding-left: 20px;
  }

  /* Hide hover metadata in print (already showing in reality row) */
  .task-hover-meta {
    display: none !important;
  }

  /* Ensure priority dots print with color */
  .priority-dot {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }
}
